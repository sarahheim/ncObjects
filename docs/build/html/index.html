

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Text2NC’s documentation &mdash; Text2NC 2.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Text2NC 2.0.0 documentation" href="#"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> Text2NC
          

          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <!-- Local TOC -->
                <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Text2NC&#8217;s documentation</a></li>
<li><a class="reference internal" href="#usage">USAGE</a><ul>
<li><a class="reference internal" href="#guide">Guide</a></li>
<li><a class="reference internal" href="#notes">Notes</a></li>
<li><a class="reference internal" href="#contents">Contents</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="#">Text2NC</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="#">Docs</a> &raquo;</li>
      
    <li>Text2NC&#8217;s documentation</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/index.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="text2nc-s-documentation">
<h1>Text2NC&#8217;s documentation<a class="headerlink" href="#text2nc-s-documentation" title="Permalink to this headline">¶</a></h1>
<p>Scripts for creating netCDF files from text/log files. Multiple modules for
different projects. Inheriting shared functions.</p>
<p>Documentation can be found at <a class="reference external" href="https://sarahheim.github.io/ncObjects/build/html/">https://sarahheim.github.io/ncObjects/build/html/</a></p>
<p>Source code can be found at <a class="reference external" href="https://github.com/sarahheim/ncObjects">https://github.com/sarahheim/ncObjects</a></p>
<p>and <a class="reference external" href="https://bitbucket.org/sarahheim/ncobjects">https://bitbucket.org/sarahheim/ncobjects</a></p>
<p>Create all new netCDFs: allLogs.py
Append to existing netCDFs: appendLatest_SASS.py</p>
<img alt="http://www.sccoos.org/static/img/SCCOOS-banner100.jpg" src="http://www.sccoos.org/static/img/SCCOOS-banner100.jpg" />
</div>
<div class="section" id="usage">
<h1>USAGE<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<p>#NEW SCCOOS SASS (including Newport)
<a href="#id1"><span class="problematic" id="id2">*</span></a>/4 * * * * /home/uproc/anaconda/envs/log2ncEnv/bin/python /data/InSitu/SASS/code/ncobjects/appendLatest_SASS.py &gt; ~/appendLatest_sass.out</p>
<div class="section" id="guide">
<h2>Guide<a class="headerlink" href="#guide" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>import sccoos
c = sccoos.CAF()
print c.ncpath
print c.logsdir
c.text2nc_all()</div></blockquote>
</div>
<div class="section" id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>change ncpath(s) in __init__ to /data (currently using local home)</li>
<li>put <em>createVariable</em> in text</li>
</ul>
<p class="rubric">Class Inheritance</p>
<img src="_images/inheritance-37f6d54aa91ea8c4803ec33e45503cb5ee74554c.png" alt="Inheritance diagram of sccoos" usemap="#inheritance45b1cfac9c" class="inheritance"/>
<map id="inheritance45b1cfac9c" name="inheritance45b1cfac9c">
<area shape="rect" id="node1" href="#nc.NC" target="_top" title="Class documentation: This root &#39;nc&#39; class is an abstract class." alt="" coords="5,5,77,31"/>
<area shape="rect" id="node2" href="#sccoos.SCCOOS" target="_top" title="Class to be used for SCCOOS related netCDFs" alt="" coords="125,5,252,31"/>
</map>
<p class="rubric">Graphviz Workflow</p>
<img src="_images/graphviz-1a9e0d61669529651279848772244ec5a1befa30.png" alt="digraph Workflow {
  labelloc=&quot;t&quot;;
  label=&quot;create NetCDFs from texts&quot;
  compound=true;
  start -&gt; text2nc_all[lhead=cluster__text2nc_all];
  start -&gt; text2nc_append[lhead=cluster__text2nc_append];

  subgraph cluster__text2nc_all {
    label=&quot;text2nc_all&quot; shape=box color=yellow href=&quot;#sccoos.SCCOOS.text2nc_all&quot;
    text2nc_all [style=&quot;invis&quot;];
    forall [shape=diamond, label=&quot;for each log file&quot;];
  }

  subgraph cluster__text2nc_append {
    label=&quot;text2nc_append&quot; shape=box color=yellow href=&quot;#sccoos.SCCOOS.text2nc_append&quot;
    text2nc_append [style=&quot;invis&quot;];
    getLastNC [shape=box,style=filled, color=green];
    getLastDateNC [ shape=box,style=filled, color=green];
    getLastNC -&gt; getLastDateNC;
    foreach [shape=diamond, label=&quot;for each: new file\n since getLastDateNC&quot;];
    getLastDateNC -&gt; foreach;
  }

  forall -&gt; text2nc [lhead=cluster__text2nc];
  foreach -&gt; &quot;pandas.read_csv&quot;[lhead=cluster__text2nc];
  subgraph cluster__text2nc {
    label=&quot;text2nc&quot; color=yellow shape=box
    text2nc [style=&quot;invis&quot;];
    &quot;pandas.read_csv&quot;;
    getLastNC2 [label=&quot;getLastNC&quot;, shape=box,style=filled, color=green];
    &quot;pandas.read_csv&quot;-&gt; getLastNC2;
    getLastDateNC2 [label=&quot;getLastDateNC&quot;, shape=box,style=filled, color=green];
    getLastNC2 -&gt; getLastDateNC2 ;
    fileSizeChecker [shape=box, color=green];

    subgraph cluster__dataToNC {
      label=&quot;dataToNC&quot; color=green shape=box
      dataToNC [style=&quot;invis&quot;];
      isfile [shape=diamond, label=&quot;file exists&quot;];
      isfile -&gt; newNC [label=&quot;No&quot;];
      newNC [label=&quot;New nc file ('w')&quot;];
      newNC -&gt; createNCshell;
      createNCshell [shape=box,style=filled, color=yellow];
      createNCshell -&gt; addNCshell;
      addNCshell [shape=box,style=filled, color=green, href=&quot;#sccoos.SCCOOS.addNCshell&quot;];
      addNCshell -&gt; NC;
      isfile -&gt; appdNC [label=&quot;Yes&quot;];
      appdNC [label=&quot;Append to nc file ('a')&quot;];
      appdNC -&gt; NCtimeMeta;
      NCtimeMeta [shape=box,style=filled, color=green];
      NCtimeMeta -&gt; ISOduration;
      ISOduration [shape=box,style=filled, color=green];
      ISOduration -&gt; NC;
      NC [shape=parallelogram];
    }

  }
    NC -&gt; fileSizeChecker;
    getLastDateNC2 -&gt; dataToNC[lhead=cluster__dataToNC] ;
}" usemap="#Workflow" />
<map id="Workflow" name="Workflow">
<area shape="rect" id="node17" href="#sccoos.SCCOOS.addNCshell" title="addNCshell" alt="" coords="225,1165,332,1213"/>
<area shape="rect" id="clust1" href="#sccoos.SCCOOS.text2nc_all" title="text2nc_all" alt="" coords="411,120,845,220"/>
<area shape="rect" id="clust2" href="#sccoos.SCCOOS.text2nc_append" title="text2nc_append" alt="" coords="16,120,400,468"/>
</map>
<img src="_images/graphviz-66ae2e6de437ca46b4b228a5c1f1a395579ce1c9.png" alt="digraph Workflow {
  labelloc=&quot;t&quot;;
  label=&quot;Update existing NetCDF(s)' metadata&quot;
  compound=true;


  start -&gt; updateAll[lhead=cluster__updateNCattrs_all];
  start -&gt; updateNCattrs_single;
  updateNCattrs_single [shape=box,style=filled, color=yellow, href=&quot;#nc.NC.updateNCattrs_single&quot;];

  subgraph cluster__updateNCattrs_all {
    label=&quot;updateNCattrs_all&quot; shape=box color=yellow href=&quot;#nc.NC.updateNCattrs_all&quot;
    updateNCattrs_all [style=&quot;invis&quot;];
    updateAll [shape=diamond, label=&quot;for each nc file&quot;];
  }

  updateAll -&gt; updateNCattrs_single;
}" usemap="#Workflow" />
<map id="Workflow" name="Workflow">
<area shape="rect" id="node3" href="#nc.NC.updateNCattrs_single" title="updateNCattrs_single" alt="" coords="361,232,540,280"/>
<area shape="rect" id="clust1" href="#nc.NC.updateNCattrs_all" title="updateNCattrs_all" alt="" coords="16,95,504,195"/>
</map>
<p class="rubric">Ex PlantUML</p>
</div></blockquote>
<p class="plantuml">
<img src="_images/plantuml-5846e885396980f39cbc39e505786930333ef476.png" alt="&#64;startuml

(*) --&gt; &quot;First mod&quot;
&quot;First mod&quot; --&gt; (*)

&#64;enduml" />
</p>
</div>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
</div>
<dl class="class">
<dt id="nc.NC">
<em class="property">class </em><code class="descclassname">nc.</code><code class="descname">NC</code><a class="reference internal" href="_modules/nc.html#NC"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nc.NC" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class documentation: This root &#8216;nc&#8217; class is an abstract class.
It will be the base to make a netcdf file.
Its children are &#8216;sccoos&#8217; (grandchildren &#8216;sass&#8217; &amp; &#8216;caf&#8217;)</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last line-block">
<div class="line">Assume: nc files end in YYYY.nc</div>
<div class="line">&#8216;time&#8217; variable in data/ncfile</div>
</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Attr str dateformat:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Attr dict metaDict:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">dictionary of netCDF&#8217;s global attributes, can be added to</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Attr dict mata_lat:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">dictionary of netCDF&#8217;s latitude attributes</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Attr dict meta_lon:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">dictionary of netCDF&#8217;s longitude attributes</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Attr dict meta_dep:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">dictionary of netCDF&#8217;s depth attributes</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="nc.NC.ISOduration">
<code class="descname">ISOduration</code><span class="sig-paren">(</span><em>minTimeS</em>, <em>maxTimeS</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nc.html#NC.ISOduration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nc.NC.ISOduration" title="Permalink to this definition">¶</a></dt>
<dd><p>returns ISO duration (days, hrs, mins, secs)
:param int minTimeS: min/start time (epoch)
:param int maxTimeS: max/end time (epoch)
:returns: duration in time in a ISO String</p>
</dd></dl>

<dl class="method">
<dt id="nc.NC.NCtimeMeta">
<code class="descname">NCtimeMeta</code><span class="sig-paren">(</span><em>ncfile</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nc.html#NC.NCtimeMeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nc.NC.NCtimeMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Update time metadata values: Calculate, SPECIFIC to file.
ISO 8601 Time duration</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncfile</strong> (<em>Dataset</em>) &#8211; netCDF file writing to</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nc.NC.attrMinMax">
<code class="descname">attrMinMax</code><span class="sig-paren">(</span><em>rt</em>, <em>attr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nc.html#NC.attrMinMax"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nc.NC.attrMinMax" title="Permalink to this definition">¶</a></dt>
<dd><p>get variables&#8217; min and max and put values into the metadata</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rt</strong> (<em>Dataset</em>) &#8211; netCDF object</li>
<li><strong>attr</strong> (<em>str</em>) &#8211; name of variable to get min/max</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nc.NC.createNCshell">
<code class="descname">createNCshell</code><span class="sig-paren">(</span><em>ncfile</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nc.html#NC.createNCshell"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nc.NC.createNCshell" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a shell of netCDF file (variables, attributes), without data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncfile</strong> (<em>str</em>) &#8211; file name of netCDF to be made, sans-path (uses <strong>ncpath</strong>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nc.NC.dataToNC">
<code class="descname">dataToNC</code><span class="sig-paren">(</span><em>ncName</em>, <em>subset</em>, <em>lookup</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nc.html#NC.dataToNC"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nc.NC.dataToNC" title="Permalink to this definition">¶</a></dt>
<dd><p>Take dataframe and put in netCDF (new file or append).
Assumes there&#8217;s a &#8216;time&#8217; variable in data/ncfile</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ncName</strong> (<em>str</em>) &#8211; name of netCDF with filepath</li>
<li><strong>subset</strong> (<em>dataframe</em>) &#8211; dataframe to be added to netCDF file</li>
<li><strong>lookup</strong> &#8211; a variable that might be needed for createNCshell, can be empty/Null</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nc.NC.fileSizeChecker">
<code class="descname">fileSizeChecker</code><span class="sig-paren">(</span><em>ncfilepath</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nc.html#NC.fileSizeChecker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nc.NC.fileSizeChecker" title="Permalink to this definition">¶</a></dt>
<dd><p>filesize checker/resizer as a NC method.
Set as 1e6, could be make default and pass as arg</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncfilepath</strong> (<em>str</em>) &#8211; filename of netcdf(with path)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nc.NC.flagStats_single">
<code class="descname">flagStats_single</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nc.html#NC.flagStats_single"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nc.NC.flagStats_single" title="Permalink to this definition">¶</a></dt>
<dd><p>counter of all the primary and secondary flags</p>
</dd></dl>

<dl class="method">
<dt id="nc.NC.text2nc">
<code class="descname">text2nc</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nc.html#NC.text2nc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nc.NC.text2nc" title="Permalink to this definition">¶</a></dt>
<dd><p>read texts in specific format and put in panda&#8217;s dataframe, to be put in nc files</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<em>str</em>) &#8211; path+filename of text file to be read (already joined with <strong>logsdir</strong>)</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When reading file, before adding to NC. Data prior to <code class="xref py py-func docutils literal"><span class="pre">nc.NC.getLastDateNC()</span></code> is
truncated so previously added data is not duplicated... Should new data contain older
data (i.e. filling a gap), this will be truncated as well.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="nc.NC.text2nc_all">
<code class="descname">text2nc_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nc.html#NC.text2nc_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nc.NC.text2nc_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop through ALL log/text files in <strong>logsdir</strong>&#8216;s subdirectories and put in NC files</p>
</dd></dl>

<dl class="method">
<dt id="nc.NC.text2nc_append">
<code class="descname">text2nc_append</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nc.html#NC.text2nc_append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nc.NC.text2nc_append" title="Permalink to this definition">¶</a></dt>
<dd><p>Append only the latest data to NC files.
This looks at the lastest datetime recorded in a netcdf,
then appends any recent data to netcdfs.</p>
</dd></dl>

<dl class="method">
<dt id="nc.NC.tupToISO">
<code class="descname">tupToISO</code><span class="sig-paren">(</span><em>timeTup</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nc.html#NC.tupToISO"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nc.NC.tupToISO" title="Permalink to this definition">¶</a></dt>
<dd><p>Only return Day, Hour, Min, Sec in ISO 8601 duration format
:param tuple timeTup: time in a tuple
:returns: timestamp in time in a ISO String</p>
</dd></dl>

<dl class="method">
<dt id="nc.NC.updateNCattrs_all">
<code class="descname">updateNCattrs_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/nc.html#NC.updateNCattrs_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nc.NC.updateNCattrs_all" title="Permalink to this definition">¶</a></dt>
<dd><p>loop through all nc files and apply updates to metadata</p>
</dd></dl>

<dl class="method">
<dt id="nc.NC.updateNCattrs_single">
<code class="descname">updateNCattrs_single</code><span class="sig-paren">(</span><em>ncName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nc.html#NC.updateNCattrs_single"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nc.NC.updateNCattrs_single" title="Permalink to this definition">¶</a></dt>
<dd><p>on a single file: run when ONLY nc METADATA needs updating, NOT any data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncName</strong> (<em>str</em>) &#8211; filename of netCDF to be made, with path</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Function uses metaDict variables set in various levels of __init__.</p>
</div>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<ul class="simple">
<li>Shouldn&#8217;t delete global attributes set in <code class="docutils literal"><span class="pre">NCtimeMeta</span></code> :</li>
</ul>
<p class="last">time_coverage_duration, date_issued, date_modified, time_coverage_start, time_coverage_end
- Except SASS object now sets <code class="docutils literal"><span class="pre">metaDict</span></code> in <code class="docutils literal"><span class="pre">createNCshell</span></code>. Therefore,
these global attributes won&#8217;t work with this function.
These include: title, date_created, history, geospatial_lat/lon/vertical_min/max,
institution, comment.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="nc.NC.updateNCmeta">
<code class="descname">updateNCmeta</code><span class="sig-paren">(</span><em>ncName</em>, <em>newDir</em>, <em>lookup</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/nc.html#NC.updateNCmeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nc.NC.updateNCmeta" title="Permalink to this definition">¶</a></dt>
<dd><p>createNCshell (which will put latest metadata in netcdf), then add all previous data
File name will be the same so pass directory to put new files.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sccoos.SCCOOS">
<em class="property">class </em><code class="descclassname">sccoos.</code><code class="descname">SCCOOS</code><a class="reference internal" href="_modules/sccoos.html#SCCOOS"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sccoos.SCCOOS" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nc.NC" title="nc.NC"><code class="xref py py-class docutils literal"><span class="pre">nc.NC</span></code></a></p>
<p>Class to be used for SCCOOS related netCDFs</p>
<p>..warning:: Assumptions: filename:prefix+YYYY.nc</p>
<dl class="method">
<dt id="sccoos.SCCOOS.ISOduration">
<code class="descname">ISOduration</code><span class="sig-paren">(</span><em>minTimeS</em>, <em>maxTimeS</em><span class="sig-paren">)</span><a class="headerlink" href="#sccoos.SCCOOS.ISOduration" title="Permalink to this definition">¶</a></dt>
<dd><p>returns ISO duration (days, hrs, mins, secs)
:param int minTimeS: min/start time (epoch)
:param int maxTimeS: max/end time (epoch)
:returns: duration in time in a ISO String</p>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.NCtimeMeta">
<code class="descname">NCtimeMeta</code><span class="sig-paren">(</span><em>ncfile</em><span class="sig-paren">)</span><a class="headerlink" href="#sccoos.SCCOOS.NCtimeMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Update time metadata values: Calculate, SPECIFIC to file.
ISO 8601 Time duration</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncfile</strong> (<em>Dataset</em>) &#8211; netCDF file writing to</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.addNCshell_SCCOOS">
<code class="descname">addNCshell_SCCOOS</code><span class="sig-paren">(</span><em>ncfile</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sccoos.html#SCCOOS.addNCshell_SCCOOS"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sccoos.SCCOOS.addNCshell_SCCOOS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.attrMinMax">
<code class="descname">attrMinMax</code><span class="sig-paren">(</span><em>rt</em>, <em>attr</em><span class="sig-paren">)</span><a class="headerlink" href="#sccoos.SCCOOS.attrMinMax" title="Permalink to this definition">¶</a></dt>
<dd><p>get variables&#8217; min and max and put values into the metadata</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rt</strong> (<em>Dataset</em>) &#8211; netCDF object</li>
<li><strong>attr</strong> (<em>str</em>) &#8211; name of variable to get min/max</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.createNCshell">
<code class="descname">createNCshell</code><span class="sig-paren">(</span><em>ncfile</em><span class="sig-paren">)</span><a class="headerlink" href="#sccoos.SCCOOS.createNCshell" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a shell of netCDF file (variables, attributes), without data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncfile</strong> (<em>str</em>) &#8211; file name of netCDF to be made, sans-path (uses <strong>ncpath</strong>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.dataToNC">
<code class="descname">dataToNC</code><span class="sig-paren">(</span><em>ncName</em>, <em>subset</em>, <em>lookup</em><span class="sig-paren">)</span><a class="headerlink" href="#sccoos.SCCOOS.dataToNC" title="Permalink to this definition">¶</a></dt>
<dd><p>Take dataframe and put in netCDF (new file or append).
Assumes there&#8217;s a &#8216;time&#8217; variable in data/ncfile</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ncName</strong> (<em>str</em>) &#8211; name of netCDF with filepath</li>
<li><strong>subset</strong> (<em>dataframe</em>) &#8211; dataframe to be added to netCDF file</li>
<li><strong>lookup</strong> &#8211; a variable that might be needed for createNCshell, can be empty/Null</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.fileSizeChecker">
<code class="descname">fileSizeChecker</code><span class="sig-paren">(</span><em>ncfilepath</em><span class="sig-paren">)</span><a class="headerlink" href="#sccoos.SCCOOS.fileSizeChecker" title="Permalink to this definition">¶</a></dt>
<dd><p>filesize checker/resizer as a NC method.
Set as 1e6, could be make default and pass as arg</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncfilepath</strong> (<em>str</em>) &#8211; filename of netcdf(with path)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.flagStats_allYears">
<code class="descname">flagStats_allYears</code><span class="sig-paren">(</span><em>csvName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sccoos.html#SCCOOS.flagStats_allYears"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sccoos.SCCOOS.flagStats_allYears" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop through all years/netCDFs make a CSV file of flag counts</p>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.flagStats_single">
<code class="descname">flagStats_single</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="headerlink" href="#sccoos.SCCOOS.flagStats_single" title="Permalink to this definition">¶</a></dt>
<dd><p>counter of all the primary and secondary flags</p>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.getAttrOrKey">
<code class="descname">getAttrOrKey</code><span class="sig-paren">(</span><em>objDict</em>, <em>kat</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sccoos.html#SCCOOS.getAttrOrKey"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sccoos.SCCOOS.getAttrOrKey" title="Permalink to this definition">¶</a></dt>
<dd><p>take specs and put into dictionary to be put in netcdf&#8217;s variable&#8217;s meta</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kat</strong> (<em>str</em>) &#8211; name of attribute or key</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">meta</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.getLastDateNC">
<code class="descname">getLastDateNC</code><span class="sig-paren">(</span><em>ncFilename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sccoos.html#SCCOOS.getLastDateNC"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sccoos.SCCOOS.getLastDateNC" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a netCDF file and return the lastest time value in epoch/seconds</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncFilename</strong> (<em>str</em>) &#8211; path of netCDF file</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">latest time value in epoch/seconds</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">number (<code class="docutils literal"><span class="pre">float</span></code>), change to <code class="docutils literal"><span class="pre">int</span></code>?</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.getLastNC">
<code class="descname">getLastNC</code><span class="sig-paren">(</span><em>prefix</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sccoos.html#SCCOOS.getLastNC"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sccoos.SCCOOS.getLastNC" title="Permalink to this definition">¶</a></dt>
<dd><p>look at all nc file names and get last/latest year</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>prefix</strong> (<em>str</em>) &#8211; filename prefix</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.qc_meta">
<code class="descname">qc_meta</code><span class="sig-paren">(</span><em>varName</em>, <em>qcSpecs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sccoos.html#SCCOOS.qc_meta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sccoos.SCCOOS.qc_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>take QC specs/parameters and put into dictionary to be put in netcdf&#8217;s variable&#8217;s meta</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>varName</strong> (<em>str</em>) &#8211; name of variable</li>
<li><strong>qcSpecs</strong> &#8211; object or dictionary</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dictionary of meta</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.qc_tests">
<code class="descname">qc_tests</code><span class="sig-paren">(</span><em>df</em>, <em>attr</em>, <em>miss_val=None</em>, <em>sensor_span=None</em>, <em>user_span=None</em>, <em>low_reps=None</em>, <em>high_reps=None</em>, <em>eps=None</em>, <em>low_thresh=None</em>, <em>high_thresh=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sccoos.html#SCCOOS.qc_tests"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sccoos.SCCOOS.qc_tests" title="Permalink to this definition">¶</a></dt>
<dd><p>Run qc tests. OLD version which passes various parameters</p>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<ul class="last simple">
<li>add _FillValue attribute</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> &#8211; dataframe</li>
<li><strong>attr</strong> &#8211; attribute, qa is being applied to</li>
<li><strong>miss_val</strong> (<em>boo</em>) &#8211; T/F; uses isnan</li>
<li><strong>sensor_span</strong> &#8211; for Range Test; tuple of low and high of good values (sensor)</li>
<li><strong>user_span</strong> &#8211; for Range Test; tuple of low and high of good values (expected/location appropriate)</li>
<li><strong>low_reps</strong> &#8211; for Flat Line check; number of repeating to be considered suspect</li>
<li><strong>high_reps</strong> &#8211; for Flat Line check; number of repeating to be considered bad</li>
<li><strong>eps</strong> &#8211; for Flat Line check;</li>
<li><strong>low_thresh</strong> &#8211; for Spike Test; see qc.spike_check</li>
<li><strong>high_thresh</strong> &#8211; for Spike Test; see qc.spike_check</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dataframe with primary and secondary flags added</p>
</td>
</tr>
</tbody>
</table>
<p>Expected kwargs: sensor_span, user_span</p>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.qc_tests_obj">
<code class="descname">qc_tests_obj</code><span class="sig-paren">(</span><em>df</em>, <em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sccoos.html#SCCOOS.qc_tests_obj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sccoos.SCCOOS.qc_tests_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Run qc tests. NEW version of <code class="docutils literal"><span class="pre">qc_tests</span></code>, which passes object,
which can have various parameters</p>
<div class="admonition-todo admonition" id="index-2">
<p class="first admonition-title">Todo</p>
<ul class="last simple">
<li>add _FillValue attribute</li>
<li>add tests done to &#8216;processing_level&#8217; metaDict</li>
<li>miss_val as input? change if statement(s)?... if parameter in obj.qc AND not None</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> &#8211; dataframe</li>
<li><strong>obj</strong> &#8211; object</li>
<li><strong>obj.name</strong> &#8211; object&#8217;s name</li>
<li><strong>obj.qc</strong> &#8211; dictionary of qc parameters</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dataframe with primary and secondary flags added</p>
</td>
</tr>
</tbody>
</table>
<p>Expected kwargs: sensor_span, user_span</p>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.qc_time_gap">
<code class="descname">qc_time_gap</code><span class="sig-paren">(</span><em>dates1</em>, <em>dates2</em>, <em>allow</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sccoos.html#SCCOOS.qc_time_gap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sccoos.SCCOOS.qc_time_gap" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for gap in time between sensor time and recorded (server_date)
.. warning: NOT done
.. note: date arrays should be in pd.to_datetime</p>
<p>Should flag be for QC on time only or variables</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dates1</strong> &#8211; The input array of observed values</li>
<li><strong>dates2</strong> &#8211; The input array of server time/recorded</li>
<li><strong>allow</strong> &#8211; cap in seconds</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An array of flagS</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.qc_time_interval">
<code class="descname">qc_time_interval</code><span class="sig-paren">(</span><em>arr</em>, <em>interval</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sccoos.html#SCCOOS.qc_time_interval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sccoos.SCCOOS.qc_time_interval" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for gap in time array</p>
<p>Should flag be for QC on time only or variables
:param arr: The input array of observed values
:param interval: cap in seconds
:returns: An array of flagS</p>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.runAllNCyrs">
<code class="descname">runAllNCyrs</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sccoos.html#SCCOOS.runAllNCyrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sccoos.SCCOOS.runAllNCyrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop through all years/netCDFs and apply specified function</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>func</strong> (<em>str</em>) &#8211; function name to be applied to all netCDFs</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.text2nc">
<code class="descname">text2nc</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#sccoos.SCCOOS.text2nc" title="Permalink to this definition">¶</a></dt>
<dd><p>read texts in specific format and put in panda&#8217;s dataframe, to be put in nc files</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<em>str</em>) &#8211; path+filename of text file to be read (already joined with <strong>logsdir</strong>)</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When reading file, before adding to NC. Data prior to <code class="xref py py-func docutils literal"><span class="pre">nc.NC.getLastDateNC()</span></code> is
truncated so previously added data is not duplicated... Should new data contain older
data (i.e. filling a gap), this will be truncated as well.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.text2nc_all">
<code class="descname">text2nc_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sccoos.SCCOOS.text2nc_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop through ALL log/text files in <strong>logsdir</strong>&#8216;s subdirectories and put in NC files</p>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.text2nc_append">
<code class="descname">text2nc_append</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sccoos.SCCOOS.text2nc_append" title="Permalink to this definition">¶</a></dt>
<dd><p>Append only the latest data to NC files.
This looks at the lastest datetime recorded in a netcdf,
then appends any recent data to netcdfs.</p>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.tupToISO">
<code class="descname">tupToISO</code><span class="sig-paren">(</span><em>timeTup</em><span class="sig-paren">)</span><a class="headerlink" href="#sccoos.SCCOOS.tupToISO" title="Permalink to this definition">¶</a></dt>
<dd><p>Only return Day, Hour, Min, Sec in ISO 8601 duration format
:param tuple timeTup: time in a tuple
:returns: timestamp in time in a ISO String</p>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.updateNCattrs_all">
<code class="descname">updateNCattrs_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sccoos.SCCOOS.updateNCattrs_all" title="Permalink to this definition">¶</a></dt>
<dd><p>loop through all nc files and apply updates to metadata</p>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.updateNCattrs_single">
<code class="descname">updateNCattrs_single</code><span class="sig-paren">(</span><em>ncName</em><span class="sig-paren">)</span><a class="headerlink" href="#sccoos.SCCOOS.updateNCattrs_single" title="Permalink to this definition">¶</a></dt>
<dd><p>on a single file: run when ONLY nc METADATA needs updating, NOT any data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncName</strong> (<em>str</em>) &#8211; filename of netCDF to be made, with path</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Function uses metaDict variables set in various levels of __init__.</p>
</div>
<div class="admonition-todo admonition" id="index-3">
<p class="first admonition-title">Todo</p>
<ul class="simple">
<li>Shouldn&#8217;t delete global attributes set in <code class="docutils literal"><span class="pre">NCtimeMeta</span></code> :</li>
</ul>
<p class="last">time_coverage_duration, date_issued, date_modified, time_coverage_start, time_coverage_end
- Except SASS object now sets <code class="docutils literal"><span class="pre">metaDict</span></code> in <code class="docutils literal"><span class="pre">createNCshell</span></code>. Therefore,
these global attributes won&#8217;t work with this function.
These include: title, date_created, history, geospatial_lat/lon/vertical_min/max,
institution, comment.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="sccoos.SCCOOS.updateNCmeta">
<code class="descname">updateNCmeta</code><span class="sig-paren">(</span><em>ncName</em>, <em>newDir</em>, <em>lookup</em><span class="sig-paren">)</span><a class="headerlink" href="#sccoos.SCCOOS.updateNCmeta" title="Permalink to this definition">¶</a></dt>
<dd><p>createNCshell (which will put latest metadata in netcdf), then add all previous data
File name will be the same so pass directory to put new files.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="caf.CAF">
<em class="property">class </em><code class="descclassname">caf.</code><code class="descname">CAF</code><a class="reference internal" href="_modules/caf.html#CAF"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#caf.CAF" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sccoos.SCCOOS" title="sccoos.SCCOOS"><code class="xref py py-class docutils literal"><span class="pre">sccoos.SCCOOS</span></code></a></p>
<p>Class for SCCOOS&#8217;s Carlsbad Aquafarm&#8217;s burkolator. Currently, log files and netCDFs.
Rename to OA/BURK??</p>
<p>Setting up CAF variables</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li>for text2nc_append: use <strong>CAF_Latest</strong> folder</li>
<li>for text2nc_all: use <strong>CAF_sorted</strong>&#8216;s folder/subfolders (i.e.2016)
which may need to be syncing/ files copied from CAF_2016 and CAF_Latest</li>
</ul>
</div>
<dl class="method">
<dt id="caf.CAF.ISOduration">
<code class="descname">ISOduration</code><span class="sig-paren">(</span><em>minTimeS</em>, <em>maxTimeS</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.ISOduration" title="Permalink to this definition">¶</a></dt>
<dd><p>returns ISO duration (days, hrs, mins, secs)
:param int minTimeS: min/start time (epoch)
:param int maxTimeS: max/end time (epoch)
:returns: duration in time in a ISO String</p>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.NCtimeMeta">
<code class="descname">NCtimeMeta</code><span class="sig-paren">(</span><em>ncfile</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.NCtimeMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Update time metadata values: Calculate, SPECIFIC to file.
ISO 8601 Time duration</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncfile</strong> (<em>Dataset</em>) &#8211; netCDF file writing to</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.addNCshell_SCCOOS">
<code class="descname">addNCshell_SCCOOS</code><span class="sig-paren">(</span><em>ncfile</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.addNCshell_SCCOOS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="caf.CAF.attrMinMax">
<code class="descname">attrMinMax</code><span class="sig-paren">(</span><em>rt</em>, <em>attr</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.attrMinMax" title="Permalink to this definition">¶</a></dt>
<dd><p>get variables&#8217; min and max and put values into the metadata</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rt</strong> (<em>Dataset</em>) &#8211; netCDF object</li>
<li><strong>attr</strong> (<em>str</em>) &#8211; name of variable to get min/max</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.createNCshell">
<code class="descname">createNCshell</code><span class="sig-paren">(</span><em>ncName</em>, <em>ignore</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/caf.html#CAF.createNCshell"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#caf.CAF.createNCshell" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="caf.CAF.dataToNC">
<code class="descname">dataToNC</code><span class="sig-paren">(</span><em>ncName</em>, <em>subset</em>, <em>lookup</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.dataToNC" title="Permalink to this definition">¶</a></dt>
<dd><p>Take dataframe and put in netCDF (new file or append).
Assumes there&#8217;s a &#8216;time&#8217; variable in data/ncfile</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ncName</strong> (<em>str</em>) &#8211; name of netCDF with filepath</li>
<li><strong>subset</strong> (<em>dataframe</em>) &#8211; dataframe to be added to netCDF file</li>
<li><strong>lookup</strong> &#8211; a variable that might be needed for createNCshell, can be empty/Null</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.fileSizeChecker">
<code class="descname">fileSizeChecker</code><span class="sig-paren">(</span><em>ncfilepath</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.fileSizeChecker" title="Permalink to this definition">¶</a></dt>
<dd><p>filesize checker/resizer as a NC method.
Set as 1e6, could be make default and pass as arg</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncfilepath</strong> (<em>str</em>) &#8211; filename of netcdf(with path)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.flagStats_allYears">
<code class="descname">flagStats_allYears</code><span class="sig-paren">(</span><em>csvName</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.flagStats_allYears" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop through all years/netCDFs make a CSV file of flag counts</p>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.flagStats_single">
<code class="descname">flagStats_single</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.flagStats_single" title="Permalink to this definition">¶</a></dt>
<dd><p>counter of all the primary and secondary flags</p>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.getAttrOrKey">
<code class="descname">getAttrOrKey</code><span class="sig-paren">(</span><em>objDict</em>, <em>kat</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.getAttrOrKey" title="Permalink to this definition">¶</a></dt>
<dd><p>take specs and put into dictionary to be put in netcdf&#8217;s variable&#8217;s meta</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kat</strong> (<em>str</em>) &#8211; name of attribute or key</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">meta</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.getLastDateNC">
<code class="descname">getLastDateNC</code><span class="sig-paren">(</span><em>ncFilename</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.getLastDateNC" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a netCDF file and return the lastest time value in epoch/seconds</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncFilename</strong> (<em>str</em>) &#8211; path of netCDF file</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">latest time value in epoch/seconds</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">number (<code class="docutils literal"><span class="pre">float</span></code>), change to <code class="docutils literal"><span class="pre">int</span></code>?</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.getLastNC">
<code class="descname">getLastNC</code><span class="sig-paren">(</span><em>prefix</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.getLastNC" title="Permalink to this definition">¶</a></dt>
<dd><p>look at all nc file names and get last/latest year</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>prefix</strong> (<em>str</em>) &#8211; filename prefix</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.qc_meta">
<code class="descname">qc_meta</code><span class="sig-paren">(</span><em>varName</em>, <em>qcSpecs</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.qc_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>take QC specs/parameters and put into dictionary to be put in netcdf&#8217;s variable&#8217;s meta</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>varName</strong> (<em>str</em>) &#8211; name of variable</li>
<li><strong>qcSpecs</strong> &#8211; object or dictionary</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dictionary of meta</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.qc_tests">
<code class="descname">qc_tests</code><span class="sig-paren">(</span><em>df</em>, <em>attr</em>, <em>miss_val=None</em>, <em>sensor_span=None</em>, <em>user_span=None</em>, <em>low_reps=None</em>, <em>high_reps=None</em>, <em>eps=None</em>, <em>low_thresh=None</em>, <em>high_thresh=None</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.qc_tests" title="Permalink to this definition">¶</a></dt>
<dd><p>Run qc tests. OLD version which passes various parameters</p>
<div class="admonition-todo admonition" id="index-4">
<p class="first admonition-title">Todo</p>
<ul class="last simple">
<li>add _FillValue attribute</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> &#8211; dataframe</li>
<li><strong>attr</strong> &#8211; attribute, qa is being applied to</li>
<li><strong>miss_val</strong> (<em>boo</em>) &#8211; T/F; uses isnan</li>
<li><strong>sensor_span</strong> &#8211; for Range Test; tuple of low and high of good values (sensor)</li>
<li><strong>user_span</strong> &#8211; for Range Test; tuple of low and high of good values (expected/location appropriate)</li>
<li><strong>low_reps</strong> &#8211; for Flat Line check; number of repeating to be considered suspect</li>
<li><strong>high_reps</strong> &#8211; for Flat Line check; number of repeating to be considered bad</li>
<li><strong>eps</strong> &#8211; for Flat Line check;</li>
<li><strong>low_thresh</strong> &#8211; for Spike Test; see qc.spike_check</li>
<li><strong>high_thresh</strong> &#8211; for Spike Test; see qc.spike_check</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dataframe with primary and secondary flags added</p>
</td>
</tr>
</tbody>
</table>
<p>Expected kwargs: sensor_span, user_span</p>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.qc_tests_obj">
<code class="descname">qc_tests_obj</code><span class="sig-paren">(</span><em>df</em>, <em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.qc_tests_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Run qc tests. NEW version of <code class="docutils literal"><span class="pre">qc_tests</span></code>, which passes object,
which can have various parameters</p>
<div class="admonition-todo admonition" id="index-5">
<p class="first admonition-title">Todo</p>
<ul class="last simple">
<li>add _FillValue attribute</li>
<li>add tests done to &#8216;processing_level&#8217; metaDict</li>
<li>miss_val as input? change if statement(s)?... if parameter in obj.qc AND not None</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> &#8211; dataframe</li>
<li><strong>obj</strong> &#8211; object</li>
<li><strong>obj.name</strong> &#8211; object&#8217;s name</li>
<li><strong>obj.qc</strong> &#8211; dictionary of qc parameters</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dataframe with primary and secondary flags added</p>
</td>
</tr>
</tbody>
</table>
<p>Expected kwargs: sensor_span, user_span</p>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.qc_time_gap">
<code class="descname">qc_time_gap</code><span class="sig-paren">(</span><em>dates1</em>, <em>dates2</em>, <em>allow</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.qc_time_gap" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for gap in time between sensor time and recorded (server_date)
.. warning: NOT done
.. note: date arrays should be in pd.to_datetime</p>
<p>Should flag be for QC on time only or variables</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dates1</strong> &#8211; The input array of observed values</li>
<li><strong>dates2</strong> &#8211; The input array of server time/recorded</li>
<li><strong>allow</strong> &#8211; cap in seconds</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An array of flagS</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.qc_time_interval">
<code class="descname">qc_time_interval</code><span class="sig-paren">(</span><em>arr</em>, <em>interval</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.qc_time_interval" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for gap in time array</p>
<p>Should flag be for QC on time only or variables
:param arr: The input array of observed values
:param interval: cap in seconds
:returns: An array of flagS</p>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.runAllNCyrs">
<code class="descname">runAllNCyrs</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.runAllNCyrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop through all years/netCDFs and apply specified function</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>func</strong> (<em>str</em>) &#8211; function name to be applied to all netCDFs</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.text2nc">
<code class="descname">text2nc</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/caf.html#CAF.text2nc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#caf.CAF.text2nc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="caf.CAF.text2nc_all">
<code class="descname">text2nc_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/caf.html#CAF.text2nc_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#caf.CAF.text2nc_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Write netCDFs from reading all log files.</p>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.text2nc_append">
<code class="descname">text2nc_append</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/caf.html#CAF.text2nc_append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#caf.CAF.text2nc_append" title="Permalink to this definition">¶</a></dt>
<dd><p>CAF data files are set by size.</p>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.tupToISO">
<code class="descname">tupToISO</code><span class="sig-paren">(</span><em>timeTup</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.tupToISO" title="Permalink to this definition">¶</a></dt>
<dd><p>Only return Day, Hour, Min, Sec in ISO 8601 duration format
:param tuple timeTup: time in a tuple
:returns: timestamp in time in a ISO String</p>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.updateNCattrs_all">
<code class="descname">updateNCattrs_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.updateNCattrs_all" title="Permalink to this definition">¶</a></dt>
<dd><p>loop through all nc files and apply updates to metadata</p>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.updateNCattrs_single">
<code class="descname">updateNCattrs_single</code><span class="sig-paren">(</span><em>ncName</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.updateNCattrs_single" title="Permalink to this definition">¶</a></dt>
<dd><p>on a single file: run when ONLY nc METADATA needs updating, NOT any data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncName</strong> (<em>str</em>) &#8211; filename of netCDF to be made, with path</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Function uses metaDict variables set in various levels of __init__.</p>
</div>
<div class="admonition-todo admonition" id="index-6">
<p class="first admonition-title">Todo</p>
<ul class="simple">
<li>Shouldn&#8217;t delete global attributes set in <code class="docutils literal"><span class="pre">NCtimeMeta</span></code> :</li>
</ul>
<p class="last">time_coverage_duration, date_issued, date_modified, time_coverage_start, time_coverage_end
- Except SASS object now sets <code class="docutils literal"><span class="pre">metaDict</span></code> in <code class="docutils literal"><span class="pre">createNCshell</span></code>. Therefore,
these global attributes won&#8217;t work with this function.
These include: title, date_created, history, geospatial_lat/lon/vertical_min/max,
institution, comment.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="caf.CAF.updateNCmeta">
<code class="descname">updateNCmeta</code><span class="sig-paren">(</span><em>ncName</em>, <em>newDir</em>, <em>lookup</em><span class="sig-paren">)</span><a class="headerlink" href="#caf.CAF.updateNCmeta" title="Permalink to this definition">¶</a></dt>
<dd><p>createNCshell (which will put latest metadata in netcdf), then add all previous data
File name will be the same so pass directory to put new files.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="dm_mooring.Moor">
<em class="property">class </em><code class="descclassname">dm_mooring.</code><code class="descname">Moor</code><span class="sig-paren">(</span><em>dpmt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dm_mooring.html#Moor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dm_mooring.Moor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sccoos.SCCOOS" title="sccoos.SCCOOS"><code class="xref py py-class docutils literal"><span class="pre">sccoos.SCCOOS</span></code></a></p>
<p>Class for SCCOOS&#8217;s Del Mar&#8217;s mooring. Currently, log files and netCDFs.</p>
<p>Setting up Moor variables</p>
<dl class="method">
<dt id="dm_mooring.Moor.ISOduration">
<code class="descname">ISOduration</code><span class="sig-paren">(</span><em>minTimeS</em>, <em>maxTimeS</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.ISOduration" title="Permalink to this definition">¶</a></dt>
<dd><p>returns ISO duration (days, hrs, mins, secs)
:param int minTimeS: min/start time (epoch)
:param int maxTimeS: max/end time (epoch)
:returns: duration in time in a ISO String</p>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.NCtimeMeta">
<code class="descname">NCtimeMeta</code><span class="sig-paren">(</span><em>ncfile</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.NCtimeMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Update time metadata values: Calculate, SPECIFIC to file.
ISO 8601 Time duration</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncfile</strong> (<em>Dataset</em>) &#8211; netCDF file writing to</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.addNCshell_SCCOOS">
<code class="descname">addNCshell_SCCOOS</code><span class="sig-paren">(</span><em>ncfile</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.addNCshell_SCCOOS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.attrMinMax">
<code class="descname">attrMinMax</code><span class="sig-paren">(</span><em>rt</em>, <em>attr</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.attrMinMax" title="Permalink to this definition">¶</a></dt>
<dd><p>get variables&#8217; min and max and put values into the metadata</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rt</strong> (<em>Dataset</em>) &#8211; netCDF object</li>
<li><strong>attr</strong> (<em>str</em>) &#8211; name of variable to get min/max</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.createNCshell">
<code class="descname">createNCshell</code><span class="sig-paren">(</span><em>ncName</em>, <em>lookup</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dm_mooring.html#Moor.createNCshell"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dm_mooring.Moor.createNCshell" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.dataToNC">
<code class="descname">dataToNC</code><span class="sig-paren">(</span><em>ncName</em>, <em>subset</em>, <em>lookup</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.dataToNC" title="Permalink to this definition">¶</a></dt>
<dd><p>Take dataframe and put in netCDF (new file or append).
Assumes there&#8217;s a &#8216;time&#8217; variable in data/ncfile</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ncName</strong> (<em>str</em>) &#8211; name of netCDF with filepath</li>
<li><strong>subset</strong> (<em>dataframe</em>) &#8211; dataframe to be added to netCDF file</li>
<li><strong>lookup</strong> &#8211; a variable that might be needed for createNCshell, can be empty/Null</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.fileSizeChecker">
<code class="descname">fileSizeChecker</code><span class="sig-paren">(</span><em>ncfilepath</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.fileSizeChecker" title="Permalink to this definition">¶</a></dt>
<dd><p>filesize checker/resizer as a NC method.
Set as 1e6, could be make default and pass as arg</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncfilepath</strong> (<em>str</em>) &#8211; filename of netcdf(with path)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.flagStats_allYears">
<code class="descname">flagStats_allYears</code><span class="sig-paren">(</span><em>csvName</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.flagStats_allYears" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop through all years/netCDFs make a CSV file of flag counts</p>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.flagStats_single">
<code class="descname">flagStats_single</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.flagStats_single" title="Permalink to this definition">¶</a></dt>
<dd><p>counter of all the primary and secondary flags</p>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.getAttrOrKey">
<code class="descname">getAttrOrKey</code><span class="sig-paren">(</span><em>objDict</em>, <em>kat</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.getAttrOrKey" title="Permalink to this definition">¶</a></dt>
<dd><p>take specs and put into dictionary to be put in netcdf&#8217;s variable&#8217;s meta</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kat</strong> (<em>str</em>) &#8211; name of attribute or key</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">meta</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.getLastDateNC">
<code class="descname">getLastDateNC</code><span class="sig-paren">(</span><em>ncFilename</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.getLastDateNC" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a netCDF file and return the lastest time value in epoch/seconds</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncFilename</strong> (<em>str</em>) &#8211; path of netCDF file</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">latest time value in epoch/seconds</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">number (<code class="docutils literal"><span class="pre">float</span></code>), change to <code class="docutils literal"><span class="pre">int</span></code>?</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.getLastNC">
<code class="descname">getLastNC</code><span class="sig-paren">(</span><em>prefix</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.getLastNC" title="Permalink to this definition">¶</a></dt>
<dd><p>look at all nc file names and get last/latest year</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>prefix</strong> (<em>str</em>) &#8211; filename prefix</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.logFilepath">
<code class="descname">logFilepath</code><span class="sig-paren">(</span><em>fn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dm_mooring.html#Moor.logFilepath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dm_mooring.Moor.logFilepath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.qc_meta">
<code class="descname">qc_meta</code><span class="sig-paren">(</span><em>varName</em>, <em>qcSpecs</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.qc_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>take QC specs/parameters and put into dictionary to be put in netcdf&#8217;s variable&#8217;s meta</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>varName</strong> (<em>str</em>) &#8211; name of variable</li>
<li><strong>qcSpecs</strong> &#8211; object or dictionary</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dictionary of meta</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.qc_tests">
<code class="descname">qc_tests</code><span class="sig-paren">(</span><em>df</em>, <em>attr</em>, <em>miss_val=None</em>, <em>sensor_span=None</em>, <em>user_span=None</em>, <em>low_reps=None</em>, <em>high_reps=None</em>, <em>eps=None</em>, <em>low_thresh=None</em>, <em>high_thresh=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.qc_tests" title="Permalink to this definition">¶</a></dt>
<dd><p>Run qc tests. OLD version which passes various parameters</p>
<div class="admonition-todo admonition" id="index-7">
<p class="first admonition-title">Todo</p>
<ul class="last simple">
<li>add _FillValue attribute</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> &#8211; dataframe</li>
<li><strong>attr</strong> &#8211; attribute, qa is being applied to</li>
<li><strong>miss_val</strong> (<em>boo</em>) &#8211; T/F; uses isnan</li>
<li><strong>sensor_span</strong> &#8211; for Range Test; tuple of low and high of good values (sensor)</li>
<li><strong>user_span</strong> &#8211; for Range Test; tuple of low and high of good values (expected/location appropriate)</li>
<li><strong>low_reps</strong> &#8211; for Flat Line check; number of repeating to be considered suspect</li>
<li><strong>high_reps</strong> &#8211; for Flat Line check; number of repeating to be considered bad</li>
<li><strong>eps</strong> &#8211; for Flat Line check;</li>
<li><strong>low_thresh</strong> &#8211; for Spike Test; see qc.spike_check</li>
<li><strong>high_thresh</strong> &#8211; for Spike Test; see qc.spike_check</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dataframe with primary and secondary flags added</p>
</td>
</tr>
</tbody>
</table>
<p>Expected kwargs: sensor_span, user_span</p>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.qc_tests_obj">
<code class="descname">qc_tests_obj</code><span class="sig-paren">(</span><em>df</em>, <em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.qc_tests_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Run qc tests. NEW version of <code class="docutils literal"><span class="pre">qc_tests</span></code>, which passes object,
which can have various parameters</p>
<div class="admonition-todo admonition" id="index-8">
<p class="first admonition-title">Todo</p>
<ul class="last simple">
<li>add _FillValue attribute</li>
<li>add tests done to &#8216;processing_level&#8217; metaDict</li>
<li>miss_val as input? change if statement(s)?... if parameter in obj.qc AND not None</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> &#8211; dataframe</li>
<li><strong>obj</strong> &#8211; object</li>
<li><strong>obj.name</strong> &#8211; object&#8217;s name</li>
<li><strong>obj.qc</strong> &#8211; dictionary of qc parameters</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dataframe with primary and secondary flags added</p>
</td>
</tr>
</tbody>
</table>
<p>Expected kwargs: sensor_span, user_span</p>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.qc_time_gap">
<code class="descname">qc_time_gap</code><span class="sig-paren">(</span><em>dates1</em>, <em>dates2</em>, <em>allow</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.qc_time_gap" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for gap in time between sensor time and recorded (server_date)
.. warning: NOT done
.. note: date arrays should be in pd.to_datetime</p>
<p>Should flag be for QC on time only or variables</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dates1</strong> &#8211; The input array of observed values</li>
<li><strong>dates2</strong> &#8211; The input array of server time/recorded</li>
<li><strong>allow</strong> &#8211; cap in seconds</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An array of flagS</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.qc_time_interval">
<code class="descname">qc_time_interval</code><span class="sig-paren">(</span><em>arr</em>, <em>interval</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.qc_time_interval" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for gap in time array</p>
<p>Should flag be for QC on time only or variables
:param arr: The input array of observed values
:param interval: cap in seconds
:returns: An array of flagS</p>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.read_csv1">
<code class="descname">read_csv1</code><span class="sig-paren">(</span><em>fn</em>, <em>col_names</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dm_mooring.html#Moor.read_csv1"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dm_mooring.Moor.read_csv1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.read_csv2">
<code class="descname">read_csv2</code><span class="sig-paren">(</span><em>fn</em>, <em>col_names</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dm_mooring.html#Moor.read_csv2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dm_mooring.Moor.read_csv2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.read_csv3">
<code class="descname">read_csv3</code><span class="sig-paren">(</span><em>fn</em>, <em>col_names</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dm_mooring.html#Moor.read_csv3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dm_mooring.Moor.read_csv3" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.runAllNCyrs">
<code class="descname">runAllNCyrs</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.runAllNCyrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop through all years/netCDFs and apply specified function</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>func</strong> (<em>str</em>) &#8211; function name to be applied to all netCDFs</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.setExtDict">
<code class="descname">setExtDict</code><span class="sig-paren">(</span><em>fnEnd</em>, <em>fnDict</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dm_mooring.html#Moor.setExtDict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dm_mooring.Moor.setExtDict" title="Permalink to this definition">¶</a></dt>
<dd><p>fnDict should contain &#8216;latest_file&#8217;, &#8216;latest_epoch&#8217; and &#8216;latest_file_size&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.text2nc">
<code class="descname">text2nc</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/dm_mooring.html#Moor.text2nc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dm_mooring.Moor.text2nc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.text2nc_all">
<code class="descname">text2nc_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dm_mooring.html#Moor.text2nc_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dm_mooring.Moor.text2nc_all" title="Permalink to this definition">¶</a></dt>
<dd><p>If starting with all new text files:
CT1169100u_11691_20160515.002c.sc1 line 31 was a problem line. If taken out,
the rest run smoothly.</p>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.text2nc_append">
<code class="descname">text2nc_append</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/dm_mooring.html#Moor.text2nc_append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dm_mooring.Moor.text2nc_append" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.tupToISO">
<code class="descname">tupToISO</code><span class="sig-paren">(</span><em>timeTup</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.tupToISO" title="Permalink to this definition">¶</a></dt>
<dd><p>Only return Day, Hour, Min, Sec in ISO 8601 duration format
:param tuple timeTup: time in a tuple
:returns: timestamp in time in a ISO String</p>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.updateNCattrs_all">
<code class="descname">updateNCattrs_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.updateNCattrs_all" title="Permalink to this definition">¶</a></dt>
<dd><p>loop through all nc files and apply updates to metadata</p>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.updateNCattrs_single">
<code class="descname">updateNCattrs_single</code><span class="sig-paren">(</span><em>ncName</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.updateNCattrs_single" title="Permalink to this definition">¶</a></dt>
<dd><p>on a single file: run when ONLY nc METADATA needs updating, NOT any data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncName</strong> (<em>str</em>) &#8211; filename of netCDF to be made, with path</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Function uses metaDict variables set in various levels of __init__.</p>
</div>
<div class="admonition-todo admonition" id="index-9">
<p class="first admonition-title">Todo</p>
<ul class="simple">
<li>Shouldn&#8217;t delete global attributes set in <code class="docutils literal"><span class="pre">NCtimeMeta</span></code> :</li>
</ul>
<p class="last">time_coverage_duration, date_issued, date_modified, time_coverage_start, time_coverage_end
- Except SASS object now sets <code class="docutils literal"><span class="pre">metaDict</span></code> in <code class="docutils literal"><span class="pre">createNCshell</span></code>. Therefore,
these global attributes won&#8217;t work with this function.
These include: title, date_created, history, geospatial_lat/lon/vertical_min/max,
institution, comment.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="dm_mooring.Moor.updateNCmeta">
<code class="descname">updateNCmeta</code><span class="sig-paren">(</span><em>ncName</em>, <em>newDir</em>, <em>lookup</em><span class="sig-paren">)</span><a class="headerlink" href="#dm_mooring.Moor.updateNCmeta" title="Permalink to this definition">¶</a></dt>
<dd><p>createNCshell (which will put latest metadata in netcdf), then add all previous data
File name will be the same so pass directory to put new files.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Sarah Heim.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>